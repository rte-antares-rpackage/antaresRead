<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Remove virtual areas — removeVirtualAreas • antaresRead</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Remove virtual areas — removeVirtualAreas"><meta property="og:description" content="This function removes virtual areas from an antaresDataList object and
corrects the data for the real areas. The antaresDataList object
should contain area and link data to function correctly."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">antaresRead</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.7.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/antaresRead.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rte-antares-rpackage/antaresRead/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Remove virtual areas</h1>
    <small class="dont-index">Source: <a href="https://github.com/rte-antares-rpackage/antaresRead/blob/master/R/removeVirtualAreas.R" class="external-link"><code>R/removeVirtualAreas.R</code></a></small>
    <div class="hidden name"><code>removeVirtualAreas.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function removes virtual areas from an <code>antaresDataList</code> object and
corrects the data for the real areas. The <code>antaresDataList</code> object
should contain area and link data to function correctly.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">removeVirtualAreas</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  storageFlexibility <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  production <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  reassignCosts <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  newCols <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  rowBal <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  prodVars <span class="op">=</span> <span class="fu"><a href="setAlias.html">getAlias</a></span><span class="op">(</span><span class="st">"rmVA_production"</span><span class="op">)</span>,</span>
<span>  costsVars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OV. COST"</span>, <span class="st">"OP. COST"</span>, <span class="st">"CO2 EMIS."</span>, <span class="st">"NP COST"</span><span class="op">)</span>,</span>
<span>  costsOn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"both"</span>, <span class="st">"storageFlexibility"</span>, <span class="st">"production"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An object of class <code>antaresDataList</code> with at least components
<code>areas</code> and <code>links</code>.</p></dd>


<dt id="arg-storageflexibility">storageFlexibility<a class="anchor" aria-label="anchor" href="#arg-storageflexibility"></a></dt>
<dd><p>A vector containing the names of the virtual
storage/flexibility areas. Can also be a named list. Names are columns
to add and elements the virtual areas to group.</p></dd>


<dt id="arg-production">production<a class="anchor" aria-label="anchor" href="#arg-production"></a></dt>
<dd><p>A vector containing the names of the virtual production
areas.</p></dd>


<dt id="arg-reassigncosts">reassignCosts<a class="anchor" aria-label="anchor" href="#arg-reassigncosts"></a></dt>
<dd><p>If TRUE, the production costs of the virtual areas are
reallocated to the real areas they are connected to. If the virtual areas
are connected to a virtual hub, their costs are first reallocated to the
hub and then the costs of the hub are reallocated to the real areas.</p></dd>


<dt id="arg-newcols">newCols<a class="anchor" aria-label="anchor" href="#arg-newcols"></a></dt>
<dd><p>If <code>TRUE</code>, new columns containing the production of the virtual
areas are added. If FALSE their production is added to the production of
the real areas they are connected to.</p></dd>


<dt id="arg-rowbal">rowBal<a class="anchor" aria-label="anchor" href="#arg-rowbal"></a></dt>
<dd><p>If <code>TRUE</code>, then BALANCE will be corrected by ROW. BAL:
BALANCE := BALANCE - "ROW. BAL"</p></dd>


<dt id="arg-prodvars">prodVars<a class="anchor" aria-label="anchor" href="#arg-prodvars"></a></dt>
<dd><p>Virtual productions columns to add to real area.
Default to <code>getAlias("rmVA_production")</code></p></dd>


<dt id="arg-costsvars">costsVars<a class="anchor" aria-label="anchor" href="#arg-costsvars"></a></dt>
<dd><p>If parameter <code>reassignCosts</code> is TRUE, affected columns.
Default to <code>OV. COST</code>, <code>OP. COST</code>, <code>CO2 EMIS.</code> and <code>NP COST</code></p></dd>


<dt id="arg-costson">costsOn<a class="anchor" aria-label="anchor" href="#arg-costson"></a></dt>
<dd><p>If parameter <code>reassignCosts</code> is TRUE, then the costs of the
virtual areas are reassigned to the real areas they are connected to.
You can choose to reassigned production &amp; storageFlexibility virtuals areas
("both", default), or only "production" or "storageFlexibility" virtuals areas</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An <code>antaresDataList</code> object in which virtual areas have been removed and
data of the real has been corrected. See details for an explanation of the
corrections.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Two types of virtual areas have been defined corresponding to different types
of modeling in Antares and different types of post-treatment to do:</p>
<ul><li><p>Flexibility/storage areas are areas created to model
pumping unit or any other flexibility that behave as a storage. For those
virtual areas, the important results are flows on the links.</p></li>
<li><p>Production areas are areas created to isolate some generation from
the "real" areas. They can be isolate for several reasons: to distinguish
time-series (for example wind onshore/offshore), to select some specific
unit to participate to day-ahead reserve, etc.</p></li>
</ul><p><code>removeVirtualAreas</code> performs different corrections:</p>
<ul><li><p>Correct the balance of the real areas (and districts) by removing the flows
to or from virtual areas.</p></li>
<li><p>If parameter <code>reassignCosts</code> is TRUE, then the costs of the
virtual areas are reassigned to the real areas they are connected to. The
default affected columns are <code>OV. COST</code>, <code>OP. COST</code>, <code>CO2 EMIS.</code>
and <code>NP COST</code>. If a virtual area is connected to a single real area,
all its costs are attributed to the real area. If it is connected to
several real areas, then costs at a given time step are divided between
them proportionally to the flows between them and the virtual area.
An aggregation is done at the end to correct districts costs.</p></li>
<li><p>For each storage/flexibility area, a column named like the area is
created. It contains the values of the flow between the virtual area and
the real areas. This column is interpreted as a production of
electricity: it is positive if the flow from the virtual area to the real
area is positive and negative otherwise. If parameter <code>newCols</code> is
<code>FALSE</code>, the values are added to the variable <code>PSP</code> and the
columns is removed.
An aggregation is done at the end to add virtual storage/flexibility to districts.</p></li>
<li><p>If the parameter <code>production</code> is specified, then the non null
productions of the virtual areas are either added to the ones of the real
areas they are connected to if <code>newCols = FALSE</code> or put in new
columns if <code>newCols = TRUE</code>. In the second case the columns are
named <code>*_virtual</code> where "<code>*</code>" is a type of
production (wind, solar, nuclear, ...). Productions that are zero for
all virtual areas are omited.
If virtual production areas contains clusters then they will be move to the
real area.
An aggregation is done at the end to add virtual production to districts.</p></li>
<li><p>Finally, virtual areas and the links connected to them are removed
from the data.</p></li>
</ul><p>The functions makes a few assumptions about the network. If they are
violated it will not act correctly:</p>
<ul><li><p>storage/flexibility
areas can be connected to other storage/flexibility areas (hubs), but at
least one of them is connected to a real area. That means that there is
no group of virtual areas disconnected from the real network. If such a
group exists, you can either remove them manually or simply not import
them.</p></li>
<li><p>production areas are connected to one and only one real area. They
cannot be connected to virtual areas. But a real area may by connected to
several production areas.</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Assume we have a network with two virtual areas acting as pump storage and</span></span></span>
<span class="r-in"><span><span class="co"># an area representing offshore production</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co">#  offshore</span></span></span>
<span class="r-in"><span><span class="co">#     |</span></span></span>
<span class="r-in"><span><span class="co"># real area - psp in</span></span></span>
<span class="r-in"><span><span class="co">#           \</span></span></span>
<span class="r-in"><span><span class="co">#             psp out</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="readAntares.html">readAntares</a></span><span class="op">(</span>areas<span class="op">=</span><span class="st">"all"</span>, links<span class="op">=</span><span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove pump storage virtual areas</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">correctedData</span> <span class="op">&lt;-</span> <span class="fu">removeVirtualAreas</span><span class="op">(</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="va">data</span>, </span></span>
<span class="r-in"><span>    storageFlexibility <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"psp in"</span>, <span class="st">"psp out"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    production <span class="op">=</span> <span class="st">"offshore"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span>                                    </span></span>
<span class="r-in"><span><span class="va">correctedData_list</span> <span class="op">&lt;-</span> <span class="fu">removeVirtualAreas</span><span class="op">(</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="va">data</span>, </span></span>
<span class="r-in"><span>    storageFlexibility <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>PSP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"psp in"</span>, <span class="st">"psp out"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    production <span class="op">=</span> <span class="st">"offshore"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span>                                   </span></span>
<span class="r-in"><span><span class="va">correctedData_details</span> <span class="op">&lt;-</span> <span class="fu">removeVirtualAreas</span><span class="op">(</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="va">data</span>, </span></span>
<span class="r-in"><span>    storageFlexibility <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>PSP_IN <span class="op">=</span> <span class="st">"psp in"</span>, PSP_OUT <span class="op">=</span>  <span class="st">"psp out"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    production <span class="op">=</span> <span class="st">"offshore"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span>                                    </span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Tatiana Vargas, Jalal-Edine ZAWAM, Francois Guillem, Benoit Thieurmel, Titouan Robert.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

