<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The 'antaresRead' Package • antaresRead</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The 'antaresRead' Package">
<meta property="og:description" content="antaresRead">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">antaresRead</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/antaresRead.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/antaresH5.html">Use h5 file format with 'antaresRead'</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rte-antares-rpackage/antaresRead/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The ‘antaresRead’ Package</h1>
                        <h4 data-toc-skip class="author">François
Guillem</h4>
            
            <h4 data-toc-skip class="date">2024-05-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rte-antares-rpackage/antaresRead/blob/HEAD/vignettes/antaresRead.Rmd" class="external-link"><code>vignettes/antaresRead.Rmd</code></a></small>
      <div class="hidden name"><code>antaresRead.Rmd</code></div>

    </div>

    
    
<p>This document describes a typical use of the <code>antaresRead</code>
package.</p>
<p>This package has been designed to read the results of an Antares
simulation in an easy and convivial way. It can of course read any
output files of a simulation at any desired time step, read synthetic
results or detailed Monte Carlo scenarios but it can also add input time
series to the results and perform some basic treatments like removing
virtual areas.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The <code>antaresRead</code> package depends on the packages
<code>data.table</code>, <code>plyr</code> and <code>lubridate</code>.
If you have not already got them you can install them with the following
command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data.table"</span>, <span class="st">"plyr"</span>, <span class="st">"lubridate"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Then you can install the <code>antaresRead</code> package either with
the Rstudio assistant in the “Packages” tab or with the following
command:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"path_to_the_package/antaresRead_***.zip"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="before-reading-data">Before reading data<a class="anchor" aria-label="anchor" href="#before-reading-data"></a>
</h2>
<p>First, when you start a new R session, you need to load the
package:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rte-antares-rpackage/antaresRead" class="external-link">antaresRead</a></span><span class="op">)</span></span></code></pre></div>
<p>To display the list of all the functions of the package and access
their help pages, type in the R console:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"antaresRead"</span><span class="op">)</span></span></code></pre></div>
<p>Then you can start using the package. The first function to use is
<code>setSimulationPath</code>.</p>
<p>This function needs to be called at least once during each R session.
It stores important informations that are used by most of the functions
of the package. While it has not been run, these functions will not
work.</p>
<p>Without any argument, <code>setSimulationPath</code> asks
interactively to choose a directory containing an antares study. If the
study contains multiple simulation results, it will also asks the user
to choose one of them. This function stores the path to the output and
reads some useful information about the simulation: type of output
available, list of areas, links and clusters in the simulation,
variables present in the output files, etc.</p>
<p><code>setSimulationPath</code> can also be used in a non-interactive
way with one of these syntaxes:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specify full path</span></span>
<span><span class="fu"><a href="../reference/setSimulationPath.html">setSimulationPath</a></span><span class="op">(</span><span class="st">"study_path/output/simulation_name"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Specify the name of the simulation</span></span>
<span><span class="fu"><a href="../reference/setSimulationPath.html">setSimulationPath</a></span><span class="op">(</span><span class="st">"study_path"</span>, <span class="va">simulation_name</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Select a simulation by order</span></span>
<span><span class="fu"><a href="../reference/setSimulationPath.html">setSimulationPath</a></span><span class="op">(</span><span class="st">"study_path"</span>, <span class="fl">1</span><span class="op">)</span> <span class="co"># first simulation</span></span>
<span></span>
<span><span class="co"># Select a simulation by reverse order</span></span>
<span><span class="fu"><a href="../reference/setSimulationPath.html">setSimulationPath</a></span><span class="op">(</span><span class="st">"study_path"</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="co"># last simulation</span></span>
<span></span>
<span><span class="co"># It is possible to store in a variable the result of the function</span></span>
<span><span class="va">opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setSimulationPath.html">setSimulationPath</a></span><span class="op">(</span><span class="st">"study_path"</span>, <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>The function returns an object containing informations about the
selected simulation. You can store this object in a variable for later
use but this is not necessary because at any moment you can retrieve
these informations.</p>
</div>
<div class="section level2">
<h2 id="reading-time-series">Reading time series<a class="anchor" aria-label="anchor" href="#reading-time-series"></a>
</h2>
<p>Once <code>setSimulationPath</code> has been run, you can start
reading data. Function <code>readAntares</code> is there for that !</p>
<p><code>readAntares</code> is the main function of the package. It is
used to read every possible time series and it performs a few treatments
on them to make your life easier. The result of the function will have
the simplest structure possible: either a simple table or a list of
tables if you asks data for differents elements (for instance links and
areas)</p>
<p>It has a huge number of parameters to control exactly what you get,
but all of them are optional. Without any argument the function will
still works and it will read the synthetic results for all the areas.
But you can import other kind of output. here are some examples:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Synthetic results for all links</span></span>
<span><span class="fu"><a href="../reference/readAntares.html">readAntares</a></span><span class="op">(</span>links<span class="op">=</span><span class="st">"all"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Synthetic results for all clusters</span></span>
<span><span class="fu"><a href="../reference/readAntares.html">readAntares</a></span><span class="op">(</span>clusters<span class="op">=</span><span class="st">"all"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Areas and links at the same time</span></span>
<span><span class="fu"><a href="../reference/readAntares.html">readAntares</a></span><span class="op">(</span>areas<span class="op">=</span><span class="st">"all"</span>, links<span class="op">=</span><span class="st">"all"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Select only a few columns. </span></span>
<span><span class="fu"><a href="../reference/readAntares.html">readAntares</a></span><span class="op">(</span>select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OV. COST"</span>, <span class="st">"OP. COST"</span>, <span class="st">"LOAD"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>You can also choose what elements to import and what level of details
you want. For instance, the following command reads the first 10
Monte-Carlo scenarii data at monthly time step for the areas named
“area1”, “area2” and “area3”.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/readAntares.html">readAntares</a></span><span class="op">(</span>areas<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"area1"</span>, <span class="st">"area2"</span>, <span class="st">"area3"</span><span class="op">)</span>, timeStep<span class="op">=</span><span class="st">"monthly"</span>,</span>
<span>            synthesis<span class="op">=</span><span class="cn">FALSE</span>, mcYears <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>Finally many arguments of <code>readAntares</code> can be used to add
input time series to the object returned by the function. For instance,
<code>misc=TRUE</code> will add columns containing miscelaneous
productions for the imported areas.</p>
</div>
<div class="section level2">
<h2 id="manipulating-data">Manipulating data<a class="anchor" aria-label="anchor" href="#manipulating-data"></a>
</h2>
<p><code>readAntares</code> returns either a single table or a list of
tables depending on the query of the user. More precisely the tables are
<code>data.table</code> objects. It is then possible to use the powerful
syntax offered by the package <code>data.table</code>.</p>
<p>The general syntax is like:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">name_of_the_table</span><span class="op">[</span><span class="va">filter_rows</span>, <span class="va">select_columns</span>, <span class="va">group_by</span><span class="op">]</span></span></code></pre></div>
<p>For instance, <code>areas[area == "08_fr", .(timeId, LOAD)]</code>
will return a table containing columns <code>timeId</code> and
<code>LOAD</code> for the area names “08_fr”. In the select statement,
it is also possible to calculate new columns. For instance, one can
compute the net load like this:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>areas[, .(area, timeId, <span class="at">netLoad =</span> LOAD <span class="sc">-</span> <span class="st">`</span><span class="at">ROW BAL.</span><span class="st">`</span> <span class="sc">-</span> PSP <span class="sc">-</span> MISC. <span class="sc">-</span> NDG <span class="sc">-</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>                                    H. ROR <span class="sc">-</span> WIND <span class="sc">-</span> SOLAR)]</span></code></pre></div>
<p>One can also compute aggregated statistics. For instance, the
following code will compute the total load of all areas per
<code>timeId</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">areas</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>totalLoad <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">LOAD</span><span class="op">)</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">timeId</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<p>Of course, aggregation also works with filters. For instance to
compute the total load only for french areas (assuming their names
contain “fr”):</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">areas</span><span class="op">[</span><span class="va">area</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="../reference/getAreas.html">getAreas</a></span><span class="op">(</span><span class="st">"fr"</span><span class="op">)</span>, <span class="fu">.</span><span class="op">(</span>totalLoad <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">LOAD</span><span class="op">)</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">timeId</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<p>If you are not familiar with package <code>data.table</code>, you
should have a look at the documentation and especially at the vignettes
of the package:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"data.table"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="other-useful-functions">Other useful functions<a class="anchor" aria-label="anchor" href="#other-useful-functions"></a>
</h2>
<p><code>readAntares</code> can import almost everything but not
everything because some data is not time series. Other functions exist
to read this specific data: <code>readBindingConstraints</code> to read
binding constraints, <code>readClusterDesc</code> to read cluster
characteristics and <code>readLayout</code> to get the coordinates of
the areas in the user interface of Antares.</p>
<p>Some parameters in <code>readAntares</code> and other functions wait
for vectors of area names or link names. On large projects with lots of
areas. It may be painful to specify by hand a long list of areas or
links. Hopefully, the functions <code>getAreas</code>and
<code>getLinks</code> can be used to select or exclude areas using
regular expressions. For instance, let us assume that the name of all
areas located in France start with the characters”fr”, then the
following command returns the list of all french areas:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/getAreas.html">getAreas</a></span><span class="op">(</span><span class="st">"fr"</span><span class="op">)</span></span></code></pre></div>
<p>To exclude offshore production areas (assuming their name contains
the word “offshore”) one can use:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/getAreas.html">getAreas</a></span><span class="op">(</span><span class="st">"fr"</span>, exclude<span class="op">=</span><span class="st">"offshore"</span><span class="op">)</span></span></code></pre></div>
<p>A few other functions are provided by the package. To see a list of
them, type in the console:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"antaresRead"</span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Tatiana Vargas, Jalal-Edine ZAWAM, Francois Guillem, Benoit Thieurmel, Titouan Robert.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
